(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[132],{285:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var s=t(5155),a=t(2115),n=t(4253),l=t(2085),i=t(9434);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:l,asChild:d=!1,...o}=e,u=d?n.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(c({variant:a,size:l,className:t})),ref:r,...o})});d.displayName="Button"},2085:(e,r,t)=>{"use strict";t.d(r,{F:()=>l});var s=t(2596);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=s.$,l=(e,r)=>t=>{var s;if((null==r?void 0:r.variants)==null)return n(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:l,defaultVariants:i}=r,c=Object.keys(l).map(e=>{let r=null==t?void 0:t[e],s=null==i?void 0:i[e];if(null===r)return null;let n=a(r)||a(s);return l[e][n]}),d=t&&Object.entries(t).reduce((e,r)=>{let[t,s]=r;return void 0===s||(e[t]=s),e},{});return n(e,c,null==r||null==(s=r.compoundVariants)?void 0:s.reduce((e,r)=>{let{class:t,className:s,...a}=r;return Object.entries(a).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...i,...d}[r]):({...i,...d})[r]===t})?[...e,t,s]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},3896:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(157).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},4253:(e,r,t)=>{"use strict";t.d(r,{DX:()=>l});var s=t(2115);function a(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}var n=t(5155),l=function(e){let r=function(e){let r=s.forwardRef((e,r)=>{let{children:t,...n}=e;if(s.isValidElement(t)){var l;let e,i,c=(l=t,(i=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(i=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),d=function(e,r){let t={...r};for(let s in r){let a=e[s],n=r[s];/^on[A-Z]/.test(s)?a&&n?t[s]=(...e)=>{let r=n(...e);return a(...e),r}:a&&(t[s]=a):"style"===s?t[s]={...a,...n}:"className"===s&&(t[s]=[a,n].filter(Boolean).join(" "))}return{...e,...t}}(n,t.props);return t.type!==s.Fragment&&(d.ref=r?function(...e){return r=>{let t=!1,s=e.map(e=>{let s=a(e,r);return t||"function"!=typeof s||(t=!0),s});if(t)return()=>{for(let r=0;r<s.length;r++){let t=s[r];"function"==typeof t?t():a(e[r],null)}}}}(r,c):c),s.cloneElement(t,d)}return s.Children.count(t)>1?s.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}(e),t=s.forwardRef((e,t)=>{let{children:a,...l}=e,i=s.Children.toArray(a),d=i.find(c);if(d){let e=d.props.children,a=i.map(r=>r!==d?r:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,n.jsx)(r,{...l,ref:t,children:s.isValidElement(e)?s.cloneElement(e,void 0,a):null})}return(0,n.jsx)(r,{...l,ref:t,children:a})});return t.displayName=`${e}.Slot`,t}("Slot"),i=Symbol("radix.slottable");function c(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===i}},5695:(e,r,t)=>{"use strict";var s=t(8999);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},6104:(e,r,t)=>{"use strict";t.d(r,{db:()=>c,j:()=>i});var s=t(3915),a=t(3004),n=t(5317);let l=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyBfFQRJAHQpMTgzYJbxX7CGNu3oYEUCu-I",authDomain:"projone-b4772.firebaseapp.com",projectId:"projone-b4772",storageBucket:"projone-b4772.appspot.com",messagingSenderId:"199309991269",appId:"1:199309991269:web:020670ef93f4c5923e558c",measurementId:"G-VXQV2LMCXG"}),i=(0,a.xI)(l),c=(0,n.aU)(l)},6695:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>l,aR:()=>i,wL:()=>u});var s=t(5155),a=t(2115),n=t(9434);let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});l.displayName="Card";let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},6796:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>E});var s=t(5155),a=t(2115),n=t(5317),l=t(6104),i=t(6695),c=t(285),d=t(172),o=t(3896),u=t(157);let f=(0,u.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),m=(0,u.A)("HandCoins",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]]),h=(0,u.A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),p=(0,u.A)("BookUser",[["path",{d:"M15 13a3 3 0 1 0-6 0",key:"10j68g"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}]]),x=(0,u.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var y=t(6874),j=t.n(y),b=t(9434);let v=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,b.cn)("w-full caption-bottom text-sm",t),...a})})});v.displayName="Table";let g=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("thead",{ref:r,className:(0,b.cn)("[&_tr]:border-b",t),...a})});g.displayName="TableHeader";let N=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("tbody",{ref:r,className:(0,b.cn)("[&_tr:last-child]:border-0",t),...a})});N.displayName="TableBody",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("tfoot",{ref:r,className:(0,b.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a})}).displayName="TableFooter";let w=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("tr",{ref:r,className:(0,b.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a})});w.displayName="TableRow";let k=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("th",{ref:r,className:(0,b.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a})});k.displayName="TableHead";let R=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("td",{ref:r,className:(0,b.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a})});R.displayName="TableCell",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("caption",{ref:r,className:(0,b.cn)("mt-4 text-sm text-muted-foreground",t),...a})}).displayName="TableCaption";var C=t(3004),A=t(5695);function E(){let[e,r]=(0,a.useState)(null),[u,y]=(0,a.useState)([]),[b,E]=(0,a.useState)(null),[S,B]=(0,a.useState)(!0),[_,z]=(0,a.useState)(null),Z=(0,A.useRouter)(),[M,P]=(0,a.useState)({});(0,a.useEffect)(()=>{!async function(){try{let e=await t.e(950).then(t.bind(t,1950)),r={};e.WILAYAS.forEach(e=>{r["wilaya_".concat(e.name)]="".concat(e.name," (ولاية)"),e.cities.forEach(e=>{r[e.value]=e.label})}),P(r)}catch(e){console.error("Failed to load constants",e)}}()},[]),(0,a.useEffect)(()=>{let e=(0,C.hg)(l.j,async e=>{if(e){let t=(0,n.H9)(l.db,"users",e.uid),s=await (0,n.x7)(t);if(s.exists()){let t=s.data();"admin"===t.role||"superadmin"===t.role?r({id:e.uid,...t}):Z.replace("/dashboard")}else Z.replace("/login")}else Z.replace("/login")});return()=>e()},[Z]),(0,a.useEffect)(()=>{e&&(async()=>{B(!0),z(null);try{let e=(0,n.rJ)(l.db,"users"),r=(0,n.P)(e,(0,n.My)("createdAt","desc")),t=await (0,n.GG)(r),s=[],a={},i={},c=0;t.forEach(e=>{let r=e.data(),t={id:e.id,username:r.username,email:r.email,phone:r.phone,desiredLocation:r.desiredLocation,compensationDetails:r.compensationDetails,specialization:r.specialization,role:r.role};s.push(t),"user"===t.role&&(t.specialization&&(a[t.specialization]=(a[t.specialization]||0)+1),t.desiredLocation&&t.desiredLocation.forEach(e=>{i[e]=(i[e]||0)+1}),r.offersCompensation&&r.compensationDetails&&Object.keys(r.compensationDetails).length>0&&(c+=1))}),y(s),E({totalUsers:s.filter(e=>"user"===e.role).length,specializationCounts:a,desiredLocationCounts:i,totalOffers:c})}catch(e){console.error("Error fetching users and stats:",e),z("فشل في تحميل بيانات المستخدمين.")}finally{B(!1)}})()},[e]);let T=(e,r)=>Object.entries(e).sort((e,r)=>{let[,t]=e,[,s]=r;return s-t}).slice(0,5).map(e=>{let[t,s]=e;return{name:(null==r?void 0:r[t])||t,count:s}}),O=e=>{switch(e){case"superadmin":return"مدير عام";case"admin":return"مسؤول";case"user":return"مستخدم";default:return"غير معروف"}};return S||!e?(0,s.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,s.jsx)(d.A,{className:"h-8 w-8 animate-spin"})}):_?(0,s.jsx)("p",{className:"text-destructive text-center",children:_}):(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)(i.Zp,{children:(0,s.jsxs)(i.aR,{className:"flex flex-row justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(i.ZB,{children:"لوحة تحكم المسؤول"}),(0,s.jsx)(i.BT,{children:"نظرة عامة على المنصة وإدارة المستخدمين."})]}),"superadmin"===e.role&&(0,s.jsx)(c.$,{asChild:!0,children:(0,s.jsxs)(j(),{href:"/dashboard/admin/add",children:[(0,s.jsx)(o.A,{className:"ml-2 h-4 w-4"}),"إضافة مسؤول"]})})]})}),b&&(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ZB,{className:"text-sm font-medium",children:"إجمالي المسجلين"}),(0,s.jsx)(f,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:b.totalUsers})})]}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ZB,{className:"text-sm font-medium",children:"إجمالي عروض المقابل"}),(0,s.jsx)(m,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:b.totalOffers})})]}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsx)(i.aR,{children:(0,s.jsxs)(i.ZB,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(h,{className:"h-4 w-4 text-muted-foreground"}),"الأماكن الأكثر طلباً"]})}),(0,s.jsx)(i.Wu,{className:"text-sm",children:(0,s.jsx)("ul",{className:"space-y-1",children:T(b.desiredLocationCounts,M).map(e=>(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:e.name})," ",(0,s.jsx)("span",{className:"font-bold",children:e.count})]},e.name))})})]}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsx)(i.aR,{children:(0,s.jsxs)(i.ZB,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(p,{className:"h-4 w-4 text-muted-foreground"}),"التخصصات الأكثر شيوعاً"]})}),(0,s.jsx)(i.Wu,{className:"text-sm",children:(0,s.jsx)("ul",{className:"space-y-1",children:T(b.specializationCounts).map(e=>(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:e.name})," ",(0,s.jsx)("span",{className:"font-bold",children:e.count})]},e.name))})})]})]}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{children:"قائمة المستخدمين"}),(0,s.jsx)(i.BT,{children:"عرض وتعديل المستخدمين المسجلين في المنصة."})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)(v,{children:[(0,s.jsx)(g,{children:(0,s.jsxs)(w,{children:[(0,s.jsx)(k,{children:"اسم المستخدم"}),(0,s.jsx)(k,{children:"البريد الإلكتروني"}),(0,s.jsx)(k,{children:"الهاتف"}),(0,s.jsx)(k,{children:"الدور"}),(0,s.jsx)(k,{children:"تعديل"})]})}),(0,s.jsx)(N,{children:u.map(r=>(0,s.jsxs)(w,{children:[(0,s.jsx)(R,{className:"font-medium",children:r.username}),(0,s.jsx)(R,{children:r.email}),(0,s.jsx)(R,{children:r.phone}),(0,s.jsx)(R,{children:O(r.role)}),(0,s.jsx)(R,{children:("superadmin"===e.role||"admin"===e.role&&"superadmin"!==r.role)&&(0,s.jsx)(c.$,{asChild:!0,variant:"outline",size:"sm",children:(0,s.jsxs)(j(),{href:"/dashboard/admin/users/edit?id=".concat(r.id),children:["تعديل ",(0,s.jsx)(x,{className:"mr-2 h-4 w-4"})]})})})]},r.id))})]})})]})]})}},7331:(e,r,t)=>{Promise.resolve().then(t.bind(t,6796))},9434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var s=t(2596),a=t(9688);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[992,644,769,611,874,441,684,358],()=>r(7331)),_N_E=e.O()}]);